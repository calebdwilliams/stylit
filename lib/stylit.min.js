export class StyleSheetRegistry{constructor(){this.adopters=new WeakMap;this.registry=new Map;this.observer=new MutationObserver(e=>{e.forEach(e=>{[...e.removedNodes].forEach(e=>{if(this.adopters.has(e)){this.adopters.delete(e)}else if(this.adopters.has(e.shadowRoot)){this.adopters.delete(e.shadowRoot)}})})});this.observer.observe(document.body,{childList:true})}adopt(e,t){const s=this.adopters.get(e)||new Set;if(!s.size){this.adopters.set(e,s)}if(!s.has(t)){e.appendChild(this.get(t));s.add(t)}}createSheet(e){const t=document.createElement("style");t.textContent=e;return t}define(e,t){let s;s=t;this.registry.set(e,s);return Promise.resolve({name:e})}get(e){return this.createSheet(this.registry.get(e))}load(e,t){return fetch(t).then(e=>e.text()).then(t=>{this.define(e,t);return e})}};